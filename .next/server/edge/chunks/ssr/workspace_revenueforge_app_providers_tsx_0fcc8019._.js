(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["chunks/ssr/workspace_revenueforge_app_providers_tsx_0fcc8019._.js",69965,a=>{"use strict";var b=a.i(19497),c=a.i(73810);a.i(26118);var d=a.i(4102);let e=(0,c.createContext)(void 0),f="auth_token",g="user_data";function h({children:a}){let h=(0,d.useRouter)(),[i,j]=(0,c.useState)({user:null,isLoading:!0,isAuthenticated:!1,error:null});(0,c.useEffect)(()=>{(async()=>{try{let a=localStorage.getItem(f),b=localStorage.getItem(g);if(a&&b){let a=JSON.parse(b);j({user:a,isLoading:!1,isAuthenticated:!0,error:null})}else j({user:null,isLoading:!1,isAuthenticated:!1,error:null})}catch{localStorage.removeItem(f),localStorage.removeItem(g),j({user:null,isLoading:!1,isAuthenticated:!1,error:null})}})()},[]);let k=(0,c.useCallback)(async(a,b)=>{j(a=>({...a,isLoading:!0,error:null}));try{await new Promise(a=>setTimeout(a,500));let b={id:"1",email:a,name:a.split("@")[0],role:a.includes("admin")?"admin":a.includes("dealer")?"dealer":"user"},c=btoa(`${a}:${Date.now()}`);localStorage.setItem(f,c),localStorage.setItem(g,JSON.stringify(b)),j({user:b,isLoading:!1,isAuthenticated:!0,error:null}),"dealer"===b.role?h.push("/dealer"):h.push("/admin")}catch(a){throw j({user:null,isLoading:!1,isAuthenticated:!1,error:"Invalid email or password"}),a}},[h]),l=(0,c.useCallback)(async(a,b,c,d)=>{j(a=>({...a,isLoading:!0,error:null}));try{await new Promise(a=>setTimeout(a,500));let c={id:Date.now().toString(),email:b,name:a,company:d,role:"user"},e=btoa(`${b}:${Date.now()}`);localStorage.setItem(f,e),localStorage.setItem(g,JSON.stringify(c)),j({user:c,isLoading:!1,isAuthenticated:!0,error:null}),h.push("/login?registered=true")}catch(a){throw j({user:null,isLoading:!1,isAuthenticated:!1,error:"Registration failed. Please try again."}),a}},[h]),m=(0,c.useCallback)(async()=>{j(a=>({...a,isLoading:!0}));try{localStorage.removeItem(f),localStorage.removeItem(g),j({user:null,isLoading:!1,isAuthenticated:!1,error:null}),h.push("/login")}catch{j({user:null,isLoading:!1,isAuthenticated:!1,error:null}),h.push("/login")}},[h]),n=(0,c.useCallback)(async a=>{j(a=>({...a,isLoading:!0,error:null}));try{await new Promise(a=>setTimeout(a,500)),j(a=>({...a,isLoading:!1}));return}catch(a){throw j(a=>({...a,isLoading:!1,error:"Failed to send reset link. Please try again."})),a}},[]),o=(0,c.useCallback)(async(a,b)=>{j(a=>({...a,isLoading:!0,error:null}));try{if(await new Promise(a=>setTimeout(a,500)),!a||a.length<10)throw Error("Invalid or expired reset token");j(a=>({...a,isLoading:!1})),h.push("/login?reset=true")}catch(a){throw j(a=>({...a,isLoading:!1,error:"Invalid or expired reset token"})),a}},[h]),p=(0,c.useCallback)(()=>{j(a=>({...a,error:null}))},[]),q={...i,login:k,register:l,logout:m,forgotPassword:n,resetPassword:o,clearError:p};return(0,b.jsx)(e.Provider,{value:q,children:a})}function i({children:a}){return(0,b.jsx)(h,{children:a})}process.env.NEXT_PUBLIC_API_URL,a.s(["Providers",()=>i],69965)}]);

//# sourceMappingURL=workspace_revenueforge_app_providers_tsx_0fcc8019._.js.map