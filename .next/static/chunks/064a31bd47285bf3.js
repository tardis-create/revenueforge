(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39088,e=>{"use strict";let r="https://revenueforge-api.pronitopenclaw.workers.dev";async function a(e,a){return fetch(`${r}${e}`,{...a,headers:{"Content-Type":"application/json",...a?.headers}})}e.s(["API_BASE_URL",0,r,"apiFetch",()=>a],39088)},47711,e=>{"use strict";var r=e.i(20366),a=e.i(61041);e.i(22302);var t=e.i(98261),s=e.i(82548),o=e.i(73083),l=e.i(2737),i=e.i(85873),n=e.i(39088);let c={company:{name:"",address:"",phone:"",taxId:""},smtp:{host:"",port:"587",user:"",password:"",fromEmail:"",fromName:""},whiteLabel:{logoUrl:"",primaryColor:"#8B5CF6",secondaryColor:"#06B6D4"}};function d(){let[e,d]=(0,a.useState)("company"),[m,p]=(0,a.useState)(c),[h,u]=(0,a.useState)({}),[g,x]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!0),[v,j]=(0,a.useState)(!1),{success:f,error:C}=(0,i.useToast)();(0,a.useEffect)(()=>{w()},[]);let w=async()=>{y(!0);try{let e=await (0,n.apiFetch)("/api/settings");if(e.ok){let r=await e.json();r&&r.settings&&p({company:{...c.company,...r.settings.company},smtp:{...c.smtp,...r.settings.smtp},whiteLabel:{...c.whiteLabel,...r.settings.whiteLabel}})}}catch(e){console.error("Failed to load settings:",e)}finally{y(!1)}},N=()=>{let e={};return m.smtp.host.trim()||(e.host="SMTP host is required"),m.smtp.port.trim()?(!/^\d+$/.test(m.smtp.port)||1>parseInt(m.smtp.port)||parseInt(m.smtp.port)>65535)&&(e.port="Port must be a number between 1 and 65535"):e.port="Port is required",m.smtp.user.trim()||(e.user="SMTP user is required"),m.smtp.password.trim()||(e.password="SMTP password is required"),m.smtp.fromEmail.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.smtp.fromEmail)||(e.fromEmail="Please enter a valid email address"):e.fromEmail="From email is required",m.smtp.fromName.trim()||(e.fromName="From name is required"),u(e),0===Object.keys(e).length},z=async()=>{x(!0),u({});let r=!1;switch(e){case"company":let a;a={},m.company.name.trim()||(a.name="Company name is required"),m.company.phone&&!/^\+?[\d\s\-().]+$/.test(m.company.phone)&&(a.phone="Please enter a valid phone number"),u(a),r=0===Object.keys(a).length;break;case"smtp":r=N();break;case"whitelabel":let t;t={},m.whiteLabel.logoUrl&&!/^https?:\/\/.+/.test(m.whiteLabel.logoUrl)&&(t.logoUrl="Logo URL must be a valid URL starting with http:// or https://"),/^#[0-9A-Fa-f]{6}$/.test(m.whiteLabel.primaryColor)||(t.primaryColor="Primary color must be a valid hex color (e.g., #8B5CF6)"),/^#[0-9A-Fa-f]{6}$/.test(m.whiteLabel.secondaryColor)||(t.secondaryColor="Secondary color must be a valid hex color (e.g., #06B6D4)"),u(t),r=0===Object.keys(t).length}if(!r){x(!1),C("Validation Failed","Please fix the errors below.");return}try{let e=await (0,n.apiFetch)("/api/settings",{method:"PUT",body:JSON.stringify(m)});if(e.ok)f("Settings Saved","Your settings have been updated successfully.");else{let r=await e.json();C("Save Failed",r.error||"Failed to save settings")}}catch(e){console.error("Failed to save settings:",e),C("Save Failed","An error occurred while saving settings.")}finally{x(!1)}},F=async()=>{if(!N())return void C("Validation Failed","Please fix SMTP settings errors before testing.");j(!0);try{let e=await (0,n.apiFetch)("/api/settings/test-email",{method:"POST",body:JSON.stringify(m.smtp)});if(e.ok){let r=await e.json();f("Test Email Sent",r.message||"Test email sent successfully.")}else{let r=await e.json();C("Test Failed",r.error||"Failed to send test email")}}catch(e){console.error("Failed to send test email:",e),C("Test Failed","An error occurred while sending test email.")}finally{j(!1)}},S=(e,r)=>{p(a=>({...a,company:{...a.company,[e]:r}})),h[e]&&u(r=>({...r,[e]:void 0}))},k=(e,r)=>{p(a=>({...a,smtp:{...a.smtp,[e]:r}})),h[e]&&u(r=>({...r,[e]:void 0}))},L=(e,r)=>{p(a=>({...a,whiteLabel:{...a.whiteLabel,[e]:r}})),h[e]&&u(r=>({...r,[e]:void 0}))};return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)(s.AnimatedContent,{children:[(0,r.jsx)("h1",{className:"text-3xl lg:text-4xl font-bold text-zinc-100 mb-2",children:(0,r.jsx)(t.BlurText,{text:"Admin Settings"})}),(0,r.jsx)("p",{className:"text-zinc-400",children:"Configure system settings for RevenueForge"})]})}),b?(0,r.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,r.jsxs)("svg",{className:"animate-spin h-8 w-8 text-purple-500",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):(0,r.jsxs)("div",{className:"grid lg:grid-cols-4 gap-8",children:[(0,r.jsx)(s.AnimatedContent,{delay:.1,children:(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)("div",{className:"space-y-1",children:[{id:"company",label:"Company Settings",icon:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},{id:"smtp",label:"SMTP Settings",icon:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},{id:"whitelabel",label:"White-Label Settings",icon:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"}].map(a=>(0,r.jsxs)("button",{onClick:()=>d(a.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors text-left ${e===a.id?"bg-gradient-to-r from-purple-600/20 to-indigo-600/20 text-purple-300 border border-purple-500/20":"text-zinc-400 hover:bg-zinc-800/50 hover:text-zinc-100"}`,children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:a.icon})}),(0,r.jsx)("span",{className:"font-medium",children:a.label})]},a.id))})})}),(0,r.jsxs)("div",{className:"lg:col-span-3",children:["company"===e&&(0,r.jsx)(s.AnimatedContent,{delay:.2,children:(0,r.jsx)(o.GlareHover,{glareColor:"rgba(168, 85, 247, 0.15)",glareSize:300,children:(0,r.jsxs)("div",{className:"p-6 bg-zinc-900/60 border border-zinc-800/50 rounded-xl backdrop-blur-sm",children:[(0,r.jsx)(l.FormSection,{title:"Company Information",description:"Update your company details and contact information",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(l.FormInput,{label:"Company Name",name:"companyName",value:m.company.name,onChange:e=>S("name",e.target.value),error:h.name,required:!0,placeholder:"Enter company name"}),(0,r.jsx)(l.FormTextarea,{label:"Address",name:"address",rows:3,value:m.company.address,onChange:e=>S("address",e.target.value),placeholder:"Enter full address including postal code"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsx)(l.FormInput,{label:"Phone",name:"phone",type:"tel",value:m.company.phone,onChange:e=>S("phone",e.target.value),error:h.phone,helpText:"Include country code (e.g., +1)"}),(0,r.jsx)(l.FormInput,{label:"Tax ID",name:"taxId",value:m.company.taxId,onChange:e=>S("taxId",e.target.value),placeholder:"e.g., GSTIN, VAT, EIN"})]})]})}),(0,r.jsx)(l.FormActions,{className:"mt-6",children:(0,r.jsx)("button",{type:"button",onClick:z,disabled:g,className:"px-6 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 border border-purple-500/30 rounded-lg text-white font-medium hover:border-purple-400/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Changes"})})]})})}),"smtp"===e&&(0,r.jsx)(s.AnimatedContent,{delay:.2,children:(0,r.jsx)(o.GlareHover,{glareColor:"rgba(168, 85, 247, 0.15)",glareSize:300,children:(0,r.jsxs)("div",{className:"p-6 bg-zinc-900/60 border border-zinc-800/50 rounded-xl backdrop-blur-sm",children:[(0,r.jsx)(l.FormSection,{title:"SMTP Configuration",description:"Configure email delivery settings for your system",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,r.jsx)("div",{className:"sm:col-span-2",children:(0,r.jsx)(l.FormInput,{label:"SMTP Host",name:"smtpHost",value:m.smtp.host,onChange:e=>k("host",e.target.value),error:h.host,required:!0,placeholder:"smtp.example.com"})}),(0,r.jsx)(l.FormInput,{label:"Port",name:"smtpPort",type:"number",value:m.smtp.port,onChange:e=>k("port",e.target.value),error:h.port,required:!0,placeholder:"587"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsx)(l.FormInput,{label:"Username",name:"smtpUser",value:m.smtp.user,onChange:e=>k("user",e.target.value),error:h.user,required:!0,placeholder:"your-username"}),(0,r.jsx)(l.FormInput,{label:"Password",name:"smtpPassword",type:"password",value:m.smtp.password,onChange:e=>k("password",e.target.value),error:h.password,required:!0,placeholder:"••••••••"})]}),(0,r.jsxs)("div",{className:"border-t border-zinc-800/50 pt-4 mt-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-zinc-300 mb-4",children:"Default Sender Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsx)(l.FormInput,{label:"From Email",name:"fromEmail",type:"email",value:m.smtp.fromEmail,onChange:e=>k("fromEmail",e.target.value),error:h.fromEmail,required:!0,placeholder:"noreply@example.com"}),(0,r.jsx)(l.FormInput,{label:"From Name",name:"fromName",value:m.smtp.fromName,onChange:e=>k("fromName",e.target.value),error:h.fromName,required:!0,placeholder:"Company Name"})]})]})]})}),(0,r.jsxs)(l.FormActions,{className:"mt-6",children:[(0,r.jsx)("button",{type:"button",onClick:F,disabled:v,className:"px-4 py-2.5 bg-zinc-800/50 border border-zinc-700/50 rounded-lg text-zinc-300 font-medium hover:border-zinc-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Test Email"]})}),(0,r.jsx)("button",{type:"button",onClick:z,disabled:g,className:"px-6 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 border border-purple-500/30 rounded-lg text-white font-medium hover:border-purple-400/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Changes"})]})]})})}),"whitelabel"===e&&(0,r.jsx)(s.AnimatedContent,{delay:.2,children:(0,r.jsx)(o.GlareHover,{glareColor:"rgba(168, 85, 247, 0.15)",glareSize:300,children:(0,r.jsxs)("div",{className:"p-6 bg-zinc-900/60 border border-zinc-800/50 rounded-xl backdrop-blur-sm",children:[(0,r.jsx)(l.FormSection,{title:"White-Label Configuration",description:"Customize the appearance of your platform",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(l.FormInput,{label:"Logo URL",name:"logoUrl",type:"url",value:m.whiteLabel.logoUrl,onChange:e=>L("logoUrl",e.target.value),error:h.logoUrl,placeholder:"https://example.com/logo.png",helpText:"URL to your company logo (recommended: 200x50px PNG)"}),m.whiteLabel.logoUrl&&(0,r.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-zinc-800/30 rounded-lg",children:[(0,r.jsx)("span",{className:"text-sm text-zinc-400",children:"Preview:"}),(0,r.jsx)("img",{src:m.whiteLabel.logoUrl,alt:"Logo preview",className:"h-10 max-w-[200px] object-contain",onError:e=>{e.target.style.display="none"}})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-zinc-300",children:"Primary Color"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"color",value:m.whiteLabel.primaryColor,onChange:e=>L("primaryColor",e.target.value),className:"w-12 h-12 rounded-lg border border-zinc-700/50 cursor-pointer bg-transparent"}),(0,r.jsx)("input",{type:"text",value:m.whiteLabel.primaryColor,onChange:e=>L("primaryColor",e.target.value),className:"flex-1 px-4 py-3 bg-zinc-800/50 border border-zinc-700/50 rounded-lg text-zinc-100 font-mono text-sm",placeholder:"#8B5CF6"})]}),h.primaryColor&&(0,r.jsx)("p",{className:"text-sm text-red-400",children:h.primaryColor})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-zinc-300",children:"Secondary Color"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"color",value:m.whiteLabel.secondaryColor,onChange:e=>L("secondaryColor",e.target.value),className:"w-12 h-12 rounded-lg border border-zinc-700/50 cursor-pointer bg-transparent"}),(0,r.jsx)("input",{type:"text",value:m.whiteLabel.secondaryColor,onChange:e=>L("secondaryColor",e.target.value),className:"flex-1 px-4 py-3 bg-zinc-800/50 border border-zinc-700/50 rounded-lg text-zinc-100 font-mono text-sm",placeholder:"#06B6D4"})]}),h.secondaryColor&&(0,r.jsx)("p",{className:"text-sm text-red-400",children:h.secondaryColor})]})]}),(0,r.jsxs)("div",{className:"p-4 bg-zinc-800/30 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-zinc-400 mb-3",children:"Color Preview:"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center text-white font-medium shadow-lg",style:{backgroundColor:m.whiteLabel.primaryColor},children:"Primary"}),(0,r.jsx)("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center text-white font-medium shadow-lg",style:{backgroundColor:m.whiteLabel.secondaryColor},children:"Secondary"}),(0,r.jsx)("div",{className:"flex-1 h-16 rounded-lg flex items-center justify-center text-white font-medium shadow-lg",style:{background:`linear-gradient(to right, ${m.whiteLabel.primaryColor}, ${m.whiteLabel.secondaryColor})`},children:"Gradient"})]})]})]})}),(0,r.jsx)(l.FormActions,{className:"mt-6",children:(0,r.jsx)("button",{type:"button",onClick:z,disabled:g,className:"px-6 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 border border-purple-500/30 rounded-lg text-white font-medium hover:border-purple-400/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Changes"})})]})})})]})]})]})}e.s(["default",()=>d])}]);