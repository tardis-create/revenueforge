(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[873],{3055:(e,r,t)=>{Promise.resolve().then(t.bind(t,3561))},3561:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var i=t(5155),n=t(2115),s=t(63),a=t(2619),l=t.n(a),o=t(6707);function c(){let e=(0,s.useRouter)(),r=(0,s.useSearchParams)(),{login:t,isLoading:a,error:c,clearError:d,isAuthenticated:u}=(0,o.As)(),[m,g]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),[x,f]=(0,n.useState)("");(0,n.useEffect)(()=>{if(u){let t=r.get("redirect")||"/admin";e.push(t)}},[u,e,r]);let b=async e=>{if(e.preventDefault(),f(""),d(),!m||!h)return void f("Please enter both email and password");try{await t(m,h)}catch(e){f("Invalid email or password")}},v=x||c;return(0,i.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-zinc-950 via-zinc-900 to-zinc-950 flex items-center justify-center p-4",children:[(0,i.jsx)("div",{className:"fixed top-0 right-0 w-[600px] h-[600px] bg-purple-500/5 rounded-full blur-[120px] pointer-events-none"}),(0,i.jsx)("div",{className:"fixed bottom-0 left-0 w-[600px] h-[600px] bg-cyan-500/5 rounded-full blur-[120px] pointer-events-none"}),(0,i.jsx)("div",{className:"w-full max-w-md relative z-10",children:(0,i.jsxs)("div",{className:"bg-zinc-900/60 border border-zinc-800/50 rounded-xl backdrop-blur-sm p-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-8",children:[(0,i.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-cyan-500 flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-white font-bold text-lg",children:"R"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-semibold text-xl text-zinc-100",children:"RevenueForge"}),(0,i.jsx)("span",{className:"text-zinc-500 text-xs block",children:"Admin Portal"})]})]}),(0,i.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-zinc-300 mb-2",children:"Email Address"}),(0,i.jsx)("input",{type:"email",id:"email",value:m,onChange:e=>g(e.target.value),className:"w-full px-4 py-3 bg-zinc-800/50 border border-zinc-700/50 rounded-lg text-zinc-100 placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",placeholder:"admin@revenueforge.com",required:!0,autoComplete:"email",disabled:a})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-zinc-300 mb-2",children:"Password"}),(0,i.jsx)("input",{type:"password",id:"password",value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-3 bg-zinc-800/50 border border-zinc-700/50 rounded-lg text-zinc-100 placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",placeholder:"••••••••",required:!0,autoComplete:"current-password",disabled:a})]}),v&&(0,i.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 text-sm text-red-400",children:v}),(0,i.jsx)("button",{type:"submit",disabled:a,className:"w-full py-3 px-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-medium rounded-lg hover:from-purple-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-zinc-900 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:a?(0,i.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,i.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign In"}),(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)(l(),{href:"/forgot-password",className:"text-sm text-zinc-500 hover:text-purple-400 transition-colors",children:"Forgot your password?"})})]}),(0,i.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,i.jsxs)("p",{className:"text-center text-sm text-zinc-500",children:["Are you a dealer?"," ",(0,i.jsx)(l(),{href:"/dealer/login",className:"text-purple-400 hover:text-purple-300 transition-colors font-medium",children:"Login here"})]}),(0,i.jsx)("p",{className:"text-center text-xs text-zinc-600",children:(0,i.jsx)(l(),{href:"/",className:"hover:text-zinc-400 transition-colors",children:"← Back to Home"})})]})]})})]})}function d(){return(0,i.jsx)(n.Suspense,{fallback:(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-zinc-950 via-zinc-900 to-zinc-950 flex items-center justify-center",children:(0,i.jsx)("div",{className:"text-zinc-400",children:"Loading..."})}),children:(0,i.jsx)(c,{})})}},6707:(e,r,t)=>{"use strict";t.d(r,{As:()=>u,OJ:()=>d});var i=t(5155),n=t(2115),s=t(63),a=t(5704);let l=(0,n.createContext)(void 0),o="auth_token",c="user_data";function d(e){let{children:r}=e,t=(0,s.useRouter)(),[a,d]=(0,n.useState)({user:null,isLoading:!0,isAuthenticated:!1,error:null});(0,n.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem(o),r=localStorage.getItem(c);if(e&&r){let e=JSON.parse(r);d({user:e,isLoading:!1,isAuthenticated:!0,error:null})}else d({user:null,isLoading:!1,isAuthenticated:!1,error:null})}catch(e){localStorage.removeItem(o),localStorage.removeItem(c),d({user:null,isLoading:!1,isAuthenticated:!1,error:null})}})()},[]);let u=(0,n.useCallback)(async(e,r)=>{d(e=>({...e,isLoading:!0,error:null}));try{await new Promise(e=>setTimeout(e,500));let r={id:"1",email:e,name:e.split("@")[0],role:e.includes("admin")?"admin":e.includes("dealer")?"dealer":"user"},i=btoa("".concat(e,":").concat(Date.now()));localStorage.setItem(o,i),localStorage.setItem(c,JSON.stringify(r)),d({user:r,isLoading:!1,isAuthenticated:!0,error:null}),"dealer"===r.role?t.push("/dealer"):t.push("/admin")}catch(e){throw d({user:null,isLoading:!1,isAuthenticated:!1,error:"Invalid email or password"}),e}},[t]),m=(0,n.useCallback)(async(e,r,i,n)=>{d(e=>({...e,isLoading:!0,error:null}));try{await new Promise(e=>setTimeout(e,500));let i={id:Date.now().toString(),email:r,name:e,company:n,role:"user"},s=btoa("".concat(r,":").concat(Date.now()));localStorage.setItem(o,s),localStorage.setItem(c,JSON.stringify(i)),d({user:i,isLoading:!1,isAuthenticated:!0,error:null}),t.push("/login?registered=true")}catch(e){throw d({user:null,isLoading:!1,isAuthenticated:!1,error:"Registration failed. Please try again."}),e}},[t]),g=(0,n.useCallback)(async()=>{d(e=>({...e,isLoading:!0}));try{localStorage.removeItem(o),localStorage.removeItem(c),d({user:null,isLoading:!1,isAuthenticated:!1,error:null}),t.push("/login")}catch(e){d({user:null,isLoading:!1,isAuthenticated:!1,error:null}),t.push("/login")}},[t]),h=(0,n.useCallback)(async e=>{d(e=>({...e,isLoading:!0,error:null}));try{await new Promise(e=>setTimeout(e,500)),d(e=>({...e,isLoading:!1}));return}catch(e){throw d(e=>({...e,isLoading:!1,error:"Failed to send reset link. Please try again."})),e}},[]),p=(0,n.useCallback)(async(e,r)=>{d(e=>({...e,isLoading:!0,error:null}));try{if(await new Promise(e=>setTimeout(e,500)),!e||e.length<10)throw Error("Invalid or expired reset token");d(e=>({...e,isLoading:!1})),t.push("/login?reset=true")}catch(e){throw d(e=>({...e,isLoading:!1,error:"Invalid or expired reset token"})),e}},[t]),x=(0,n.useCallback)(()=>{d(e=>({...e,error:null}))},[]),f={...a,login:u,register:m,logout:g,forgotPassword:h,resetPassword:p,clearError:x};return(0,i.jsx)(l.Provider,{value:f,children:r})}function u(){let e=(0,n.useContext)(l);return void 0===e?{user:null,isLoading:!1,isAuthenticated:!1,error:null,login:async()=>{console.warn("AuthProvider not initialized - login called during static generation")},register:async()=>{console.warn("AuthProvider not initialized - register called during static generation")},logout:async()=>{console.warn("AuthProvider not initialized - logout called during static generation")},forgotPassword:async()=>{console.warn("AuthProvider not initialized - forgotPassword called during static generation")},resetPassword:async()=>{console.warn("AuthProvider not initialized - resetPassword called during static generation")},clearError:()=>{console.warn("AuthProvider not initialized - clearError called during static generation")}}:e}a.env.NEXT_PUBLIC_API_URL}},e=>{e.O(0,[176,441,255,358],()=>e(e.s=3055)),_N_E=e.O()}]);