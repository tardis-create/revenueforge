(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[544],{63:(e,r,t)=>{"use strict";var s=t(7260);t.o(s,"useParams")&&t.d(r,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},3280:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var s=t(5155),a=t(2115),n=t(63),i=t(6707);function l(e){var r;let{children:t}=e,l=(0,n.useRouter)(),o=(0,n.usePathname)(),{isAuthenticated:c,isLoading:d,user:u,logout:h}=(0,i.As)(),[m,g]=(0,a.useState)(!0);if((0,a.useEffect)(()=>{if(!d){let e=(null==u?void 0:u.role)==="dealer"||(null==u?void 0:u.role)==="admin";c||"/dealer/login"===o?c&&!e&&"/dealer/login"!==o&&l.push("/login"):l.push("/dealer/login"),g(!1)}},[c,d,o,l,u]),m||d)return(0,s.jsx)("div",{className:"min-h-screen bg-zinc-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-zinc-900"})});let x=async()=>{await h(),l.push("/dealer/login")},f=[{href:"/dealer",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/dealer/products",label:"Products",icon:"\uD83D\uDCE6"},{href:"/dealer/orders",label:"Orders",icon:"\uD83D\uDED2"},{href:"/dealer/commissions",label:"Commissions",icon:"\uD83D\uDCB0"}],p=c&&((null==u?void 0:u.role)==="dealer"||(null==u?void 0:u.role)==="admin");return(0,s.jsxs)("div",{className:"min-h-screen bg-zinc-50",children:[(0,s.jsx)("nav",{className:"bg-white border-b border-zinc-200 sticky top-0 z-50",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-zinc-900 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-sm",children:"RF"})}),(0,s.jsxs)("div",{className:"hidden sm:block",children:[(0,s.jsx)("span",{className:"font-semibold text-zinc-900 text-lg",children:"RevenueForge"}),(0,s.jsx)("span",{className:"text-zinc-400 mx-2",children:"â€¢"}),(0,s.jsx)("span",{className:"text-zinc-600 text-sm",children:"Dealer Portal"})]})]}),p&&(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"hidden sm:flex items-center gap-2 text-sm text-zinc-600",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-zinc-200 rounded-full flex items-center justify-center text-zinc-700 font-semibold text-xs",children:(null==u||null==(r=u.name)?void 0:r.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))||"DP"}),(0,s.jsx)("span",{children:(null==u?void 0:u.name)||"Dealer Partner"})]}),(0,s.jsx)("button",{onClick:x,className:"text-sm text-zinc-600 hover:text-zinc-900 transition-colors",children:"Logout"})]})]})})}),p&&(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("aside",{className:"hidden lg:block w-64 bg-white border-r border-zinc-200 min-h-[calc(100vh-4rem)] sticky top-16",children:(0,s.jsx)("nav",{className:"p-4 space-y-1",children:f.map(e=>{let r=o===e.href;return(0,s.jsxs)("a",{href:e.href,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(r?"bg-zinc-900 text-white":"text-zinc-600 hover:bg-zinc-100"),children:[(0,s.jsx)("span",{className:"text-xl",children:e.icon}),(0,s.jsx)("span",{className:"font-medium",children:e.label})]},e.href)})})}),(0,s.jsx)("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-zinc-200 z-50",children:(0,s.jsx)("nav",{className:"flex justify-around py-2",children:f.map(e=>{let r=o===e.href;return(0,s.jsxs)("a",{href:e.href,className:"flex flex-col items-center gap-1 px-3 py-2 rounded-lg transition-colors ".concat(r?"text-zinc-900":"text-zinc-400"),children:[(0,s.jsx)("span",{className:"text-xl",children:e.icon}),(0,s.jsx)("span",{className:"text-xs font-medium",children:e.label})]},e.href)})})}),(0,s.jsx)("main",{className:"flex-1 p-4 lg:p-8 pb-20 lg:pb-8",children:t})]}),!p&&"/dealer/login"===o&&(0,s.jsx)("main",{children:t})]})}},4828:(e,r,t)=>{Promise.resolve().then(t.bind(t,3280))},6707:(e,r,t)=>{"use strict";t.d(r,{As:()=>u,OJ:()=>d});var s=t(5155),a=t(2115),n=t(63),i=t(5704);let l=(0,a.createContext)(void 0),o="auth_token",c="user_data";function d(e){let{children:r}=e,t=(0,n.useRouter)(),[i,d]=(0,a.useState)({user:null,isLoading:!0,isAuthenticated:!1,error:null});(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem(o),r=localStorage.getItem(c);if(e&&r){let e=JSON.parse(r);d({user:e,isLoading:!1,isAuthenticated:!0,error:null})}else d({user:null,isLoading:!1,isAuthenticated:!1,error:null})}catch(e){localStorage.removeItem(o),localStorage.removeItem(c),d({user:null,isLoading:!1,isAuthenticated:!1,error:null})}})()},[]);let u=(0,a.useCallback)(async(e,r)=>{d(e=>({...e,isLoading:!0,error:null}));try{await new Promise(e=>setTimeout(e,500));let r={id:"1",email:e,name:e.split("@")[0],role:e.includes("admin")?"admin":e.includes("dealer")?"dealer":"user"},s=btoa("".concat(e,":").concat(Date.now()));localStorage.setItem(o,s),localStorage.setItem(c,JSON.stringify(r)),d({user:r,isLoading:!1,isAuthenticated:!0,error:null}),"dealer"===r.role?t.push("/dealer"):t.push("/admin")}catch(e){throw d({user:null,isLoading:!1,isAuthenticated:!1,error:"Invalid email or password"}),e}},[t]),h=(0,a.useCallback)(async(e,r,s,a)=>{d(e=>({...e,isLoading:!0,error:null}));try{await new Promise(e=>setTimeout(e,500));let s={id:Date.now().toString(),email:r,name:e,company:a,role:"user"},n=btoa("".concat(r,":").concat(Date.now()));localStorage.setItem(o,n),localStorage.setItem(c,JSON.stringify(s)),d({user:s,isLoading:!1,isAuthenticated:!0,error:null}),t.push("/login?registered=true")}catch(e){throw d({user:null,isLoading:!1,isAuthenticated:!1,error:"Registration failed. Please try again."}),e}},[t]),m=(0,a.useCallback)(async()=>{d(e=>({...e,isLoading:!0}));try{localStorage.removeItem(o),localStorage.removeItem(c),d({user:null,isLoading:!1,isAuthenticated:!1,error:null}),t.push("/login")}catch(e){d({user:null,isLoading:!1,isAuthenticated:!1,error:null}),t.push("/login")}},[t]),g=(0,a.useCallback)(async e=>{d(e=>({...e,isLoading:!0,error:null}));try{await new Promise(e=>setTimeout(e,500)),d(e=>({...e,isLoading:!1}));return}catch(e){throw d(e=>({...e,isLoading:!1,error:"Failed to send reset link. Please try again."})),e}},[]),x=(0,a.useCallback)(async(e,r)=>{d(e=>({...e,isLoading:!0,error:null}));try{if(await new Promise(e=>setTimeout(e,500)),!e||e.length<10)throw Error("Invalid or expired reset token");d(e=>({...e,isLoading:!1})),t.push("/login?reset=true")}catch(e){throw d(e=>({...e,isLoading:!1,error:"Invalid or expired reset token"})),e}},[t]),f=(0,a.useCallback)(()=>{d(e=>({...e,error:null}))},[]),p={...i,login:u,register:h,logout:m,forgotPassword:g,resetPassword:x,clearError:f};return(0,s.jsx)(l.Provider,{value:p,children:r})}function u(){let e=(0,a.useContext)(l);return void 0===e?{user:null,isLoading:!1,isAuthenticated:!1,error:null,login:async()=>{console.warn("AuthProvider not initialized - login called during static generation")},register:async()=>{console.warn("AuthProvider not initialized - register called during static generation")},logout:async()=>{console.warn("AuthProvider not initialized - logout called during static generation")},forgotPassword:async()=>{console.warn("AuthProvider not initialized - forgotPassword called during static generation")},resetPassword:async()=>{console.warn("AuthProvider not initialized - resetPassword called during static generation")},clearError:()=>{console.warn("AuthProvider not initialized - clearError called during static generation")}}:e}i.env.NEXT_PUBLIC_API_URL}},e=>{e.O(0,[441,255,358],()=>e(e.s=4828)),_N_E=e.O()}]);